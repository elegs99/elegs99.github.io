!function(t){"use strict";function i(i,e){if("string"==typeof i&&(i=document.querySelector(i)),!(i&&i instanceof HTMLElement))throw new Error("InfiniteScrollCarousel: Container element not found");this.container=i,this.options={speed:e&&void 0!==e.speed?e.speed:50,reverseDirection:e&&!0===e.reverseDirection,pauseOnHover:e&&!1!==e.pauseOnHover,responsive:e&&!1!==e.responsive,momentumDecay:e&&void 0!==e.momentumDecay?e.momentumDecay:.95,maxMomentumSpeed:e&&void 0!==e.maxMomentumSpeed?e.maxMomentumSpeed:2,fadeColor:e&&void 0!==e.fadeColor?e.fadeColor:"#ffffff",copies:e&&void 0!==e.copies?e.copies:3,...e},this.validateOptions(),this.isScrolling=!1,this.isPaused=!1,this.isDragging=!1,this.isMomentumActive=!1,this.currentPosition=0,this.animationId=null,this.lastTimestamp=0,this.resetPosition=null,this.totalSetWidth=null,this.isMeasuring=!1,this.originalItemCount=0,this.hasDuplicated=!1,this.dragStartX=0,this.dragStartPosition=0,this.minDragBoundary=0,this.maxDragBoundary=0,this.velocity=0,this.lastDragTime=0,this.lastDragX=0,this.resizeHandler=null,this.resizeDelayTimeout=null,this.lastWidth=t.innerWidth,this.boundHandlers={mouseenter:null,mouseleave:null,mousedown:null,mousemove:null,mouseup:null,mouseleaveWindow:null,touchstart:null,touchmove:null,touchend:null,selectstart:null},this.init()}i.prototype.validateOptions=function(){if(this.options.speed<0){const t=this.options.speed;this.options.speed=Math.abs(this.options.speed),this.options.reverseDirection=!0,console.warn("InfiniteScrollCarousel: Negative speed value "+t+" is deprecated. Use positive speed with reverseDirection: true instead. Speed clamped to "+this.options.speed+" and reverseDirection set to true.")}if(this.options.speed<0&&(this.options.speed=0),this.options.momentumDecay<.5||this.options.momentumDecay>.99){const t=this.options.momentumDecay;this.options.momentumDecay=Math.max(.5,Math.min(.99,this.options.momentumDecay)),console.warn("InfiniteScrollCarousel: momentumDecay value "+t+" is outside valid range (0.5 - 0.99). Clamped to "+this.options.momentumDecay+".")}if(this.options.maxMomentumSpeed<.5||this.options.maxMomentumSpeed>25){const t=this.options.maxMomentumSpeed;this.options.maxMomentumSpeed=Math.max(.5,Math.min(25,this.options.maxMomentumSpeed)),console.warn("InfiniteScrollCarousel: maxMomentumSpeed value "+t+" is outside valid range (0.5 - 25). Clamped to "+this.options.maxMomentumSpeed+".")}if(this.options.copies<3){const t=this.options.copies;this.options.copies=Math.max(3,Math.min(100,this.options.copies)),console.warn("InfiniteScrollCarousel: copies value "+t+" must be greater than or equal to 3. Clamped to "+this.options.copies+".")}},i.prototype.init=function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this.initialize.bind(this)):this.initialize()},i.prototype.initialize=function(){this.applyFadeColor(),this.duplicateItems(),this.setupEventListeners(),setTimeout(function(){this.calculateScrollDistance(function(){this.setInitialPosition(),this.startScrolling()}.bind(this))}.bind(this),50)},i.prototype.colorToRgba=function(t,i){if(void 0===i&&(i=.3),t.startsWith("rgba")){const e=t.match(/rgba?\(([^)]+)\)/);if(e){const t=e[1].split(",").map(function(t){return t.trim()});return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+i+")"}}if(t.startsWith("rgb")){const e=t.match(/rgb\(([^)]+)\)/);if(e){const t=e[1].split(",").map(function(t){return t.trim()});return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+i+")"}}if(t.startsWith("#")){3===(t=t.replace("#","")).length&&(t=t.split("").map(function(t){return t+t}).join(""));return"rgba("+parseInt(t.substring(0,2),16)+", "+parseInt(t.substring(2,4),16)+", "+parseInt(t.substring(4,6),16)+", "+i+")"}return t},i.prototype.applyFadeColor=function(){let t=this.container.parentElement;if(!t||!t.classList||!t.classList.contains("infinite-scroll-wrapper")){let i=this.container.parentElement;for(;i&&i!==document.body;){if(i.classList&&i.classList.contains("infinite-scroll-wrapper")){t=i;break}i=i.parentElement}}if(!t)return void console.warn("InfiniteScrollCarousel: Could not find wrapper element");const i=this.colorToRgba(this.options.fadeColor,1);t.style.setProperty("--fade-gradient-left","linear-gradient(to right, "+i+", transparent)"),t.style.setProperty("--fade-gradient-right","linear-gradient(to left, "+i+", transparent)"),t.setAttribute("data-fade-color","")},i.prototype.duplicateItems=function(){if(this.hasDuplicated)return;const t=Array.from(this.container.children);if(0===t.length)return console.warn("InfiniteScrollCarousel: No children found in container"),void(this.originalItemCount=0);this.originalItemCount=t.length;const i=this.options.copies||3;for(let e=1;e<i;e++)t.forEach(function(t){const i=t.cloneNode(!0);this.container.appendChild(i)}.bind(this));this.hasDuplicated=!0},i.prototype.calculateScrollDistance=function(i){if(this.isMeasuring){if(i){const t=setInterval(function(){this.isMeasuring||(clearInterval(t),i())}.bind(this),10)}}else{this.isMeasuring=!0;try{const e=Array.from(this.container.children);if(0===e.length)return this.isMeasuring=!1,void(i&&i());if(!this.originalItemCount||0===this.originalItemCount)return console.warn("InfiniteScrollCarousel: No items to scroll"),this.isMeasuring=!1,void(i&&i());const s=this.originalItemCount,n=this.isScrolling,o=this.currentPosition,r=(this.container.style.transform,this.totalSetWidth);this.isScrolling=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.container.style.transform="translateX(0px)",this.currentPosition=0,this.container.offsetHeight,requestAnimationFrame(function(){let a=0;if(e.length>=2*s){const t=e[0].getBoundingClientRect();a=e[s].getBoundingClientRect().left-t.left}else{const i=t.getComputedStyle(e[0]),n=parseFloat(i.marginRight)||0;for(let t=0;t<s;t++){const i=e[t];if(!i)continue;a+=i.offsetWidth,t<s-1&&(a+=n)}}const h=Math.round(100*a)/100,l=-h;let u=o;if(r&&r!==h&&0!==o){u=o*(h/r),u>=0?u=this.options.reverseDirection?l:0:u<=l&&(u=l)}this.totalSetWidth=h,this.resetPosition=l,this.container.style.transform="translateX("+u+"px)",this.currentPosition=u,this.isScrolling=n,this.container.offsetHeight,this.calculateDragBoundaries(),this.snapToValidPosition(),!n||this.isPaused||this.isDragging||this.isMomentumActive||this.animationId||(this.lastTimestamp=0,this.animate()),this.isMeasuring=!1,i&&i()}.bind(this))}catch(t){console.error("InfiniteScrollCarousel: Error calculating scroll distance:",t),this.isMeasuring=!1,i&&i()}}},i.prototype.setInitialPosition=function(){null!==this.resetPosition&&(this.options.reverseDirection?(this.currentPosition=this.resetPosition,this.container.style.transform="translateX("+this.currentPosition+"px)"):(this.currentPosition=0,this.container.style.transform="translateX(0px)"))},i.prototype.calculateDragBoundaries=function(){null!==this.resetPosition&&(this.minDragBoundary=this.resetPosition,this.maxDragBoundary=0)},i.prototype.setupEventListeners=function(){this.resizeHandler&&t.removeEventListener("resize",this.resizeHandler),this.options.pauseOnHover&&(this.boundHandlers.mouseenter=function(){this.isDragging||this.isMomentumActive||this.pause()}.bind(this),this.boundHandlers.mouseleave=function(){this.isDragging||this.isMomentumActive||this.resume()}.bind(this),this.container.addEventListener("mouseenter",this.boundHandlers.mouseenter),this.container.addEventListener("mouseleave",this.boundHandlers.mouseleave)),this.boundHandlers.mousedown=this.startDragging.bind(this),this.boundHandlers.mousemove=this.handleDrag.bind(this),this.boundHandlers.mouseup=this.endDragging.bind(this),this.container.addEventListener("mousedown",this.boundHandlers.mousedown),document.addEventListener("mousemove",this.boundHandlers.mousemove),document.addEventListener("mouseup",this.boundHandlers.mouseup),this.boundHandlers.mouseleaveWindow=function(){this.isDragging&&this.endDragging()}.bind(this),t.addEventListener("mouseleave",this.boundHandlers.mouseleaveWindow),this.boundHandlers.touchstart=this.startDragging.bind(this),this.boundHandlers.touchmove=this.handleDrag.bind(this),this.boundHandlers.touchend=this.endDragging.bind(this),this.container.addEventListener("touchstart",this.boundHandlers.touchstart,{passive:!1}),document.addEventListener("touchmove",this.boundHandlers.touchmove,{passive:!1}),document.addEventListener("touchend",this.boundHandlers.touchend),this.boundHandlers.selectstart=function(t){t.preventDefault()},this.container.addEventListener("selectstart",this.boundHandlers.selectstart),this.resizeHandler=function(){const i=t.innerWidth;i!==this.lastWidth&&(this.resizeDelayTimeout&&(clearTimeout(this.resizeDelayTimeout),this.resizeDelayTimeout=null),this.resizeDelayTimeout=setTimeout(function(){this.lastWidth=i,this.resizeDelayTimeout=null,this.calculateScrollDistance()}.bind(this),50))}.bind(this),t.addEventListener("resize",this.resizeHandler)},i.prototype.startDragging=function(t){this.isDragging=!0,this.isMomentumActive=!1,this.pause();let i=t.clientX||t.touches&&t.touches[0].clientX;(null==i||isNaN(i))&&(i=0),this.dragStartX=i,this.dragStartPosition=this.currentPosition,this.lastDragTime=Date.now(),this.lastDragX=i,this.velocity=0,this.container.style.cursor="grabbing",t.preventDefault()},i.prototype.handleDrag=function(t){if(!this.isDragging)return;let i=t.clientX||t.touches&&t.touches[0].clientX;if(null==i||isNaN(i)){if(void 0===this.lastDragX||null===this.lastDragX||isNaN(this.lastDragX))return;i=this.lastDragX}const e=Date.now(),s=i-this.dragStartX;if(e>this.lastDragTime&&void 0!==this.lastDragX&&null!==this.lastDragX&&!isNaN(this.lastDragX)){const t=e-this.lastDragTime,s=i-this.lastDragX;t>0&&(this.velocity=s/t,this.velocity=Math.max(-this.options.maxMomentumSpeed,Math.min(this.options.maxMomentumSpeed,this.velocity)))}this.lastDragTime=e,this.lastDragX=i;let n=this.dragStartPosition+s;null!==this.resetPosition&&(n<=this.minDragBoundary?(n=this.maxDragBoundary+(n-this.minDragBoundary),this.dragStartPosition=n,this.dragStartX=i):n>=this.maxDragBoundary&&(n=this.minDragBoundary+(n-this.maxDragBoundary),this.dragStartPosition=n,this.dragStartX=i)),this.currentPosition=n,this.container.style.transform="translateX("+this.currentPosition+"px)",t.preventDefault()},i.prototype.endDragging=function(){if(!this.isDragging)return void this.resume();this.isDragging=!1;const t=null===this.velocity||void 0===this.velocity||isNaN(this.velocity)?0:this.velocity;Math.abs(t)>.01?(this.velocity=t,this.startMomentum()):(this.velocity=0,this.snapToValidPosition(),this.container.style.cursor="grab",this.resume())},i.prototype.startMomentum=function(){this.isMomentumActive=!0,this.container.style.cursor="grab",this.animateMomentum()},i.prototype.animateMomentum=function(){if(this.isMomentumActive){if(this.currentPosition+=16*this.velocity,this.velocity*=this.options.momentumDecay,null!==this.resetPosition&&(this.currentPosition<=this.minDragBoundary?this.currentPosition=this.maxDragBoundary+(this.currentPosition-this.minDragBoundary):this.currentPosition>=this.maxDragBoundary&&(this.currentPosition=this.minDragBoundary+(this.currentPosition-this.maxDragBoundary))),this.container.style.transform="translateX("+this.currentPosition+"px)",Math.abs(this.velocity)<.02)return this.isMomentumActive=!1,this.velocity=0,this.snapToValidPosition(),void this.resume();requestAnimationFrame(this.animateMomentum.bind(this))}},i.prototype.snapToValidPosition=function(){null!==this.resetPosition&&(this.options.reverseDirection?this.currentPosition>=0&&(this.currentPosition=this.resetPosition,this.container.style.transform="translateX("+this.currentPosition+"px)"):this.currentPosition<=this.resetPosition&&(this.currentPosition=0,this.container.style.transform="translateX(0px)"))},i.prototype.startScrolling=function(){this.isScrolling||(this.isScrolling=!0,this.lastTimestamp=0,this.animate())},i.prototype.pause=function(){this.isPaused=!0},i.prototype.resume=function(){this.isPaused=!1,!this.isScrolling||this.animationId||this.isMomentumActive||(this.lastTimestamp=0,this.animate())},i.prototype.stop=function(){this.isScrolling=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)},i.prototype.animate=function(t){if(!this.isScrolling)return void(this.animationId=null);if(0===this.lastTimestamp)return this.lastTimestamp=t||0,void(this.animationId=requestAnimationFrame(this.animate.bind(this)));const i=(t||0)-this.lastTimestamp;if(this.lastTimestamp=t||0,!this.isPaused&&i>0&&!this.isDragging&&!this.isMomentumActive){const t=100,e=Math.min(i,t),s=this.options.speed/1e3*e;let n;n=this.options.reverseDirection?this.currentPosition+s:this.currentPosition-s;const o=1;null!==this.resetPosition?this.options.reverseDirection?this.currentPosition=n>=0-o?this.resetPosition:n:n<=this.resetPosition+o?this.currentPosition=0:this.currentPosition=n:this.currentPosition=n,this.container.style.transform="translateX("+this.currentPosition+"px)"}this.animationId=requestAnimationFrame(this.animate.bind(this))},i.prototype.destroy=function(){this.stop(),this.boundHandlers.mouseenter&&this.container.removeEventListener("mouseenter",this.boundHandlers.mouseenter),this.boundHandlers.mouseleave&&this.container.removeEventListener("mouseleave",this.boundHandlers.mouseleave),this.boundHandlers.mousedown&&this.container.removeEventListener("mousedown",this.boundHandlers.mousedown),this.boundHandlers.mousemove&&document.removeEventListener("mousemove",this.boundHandlers.mousemove),this.boundHandlers.mouseup&&document.removeEventListener("mouseup",this.boundHandlers.mouseup),this.boundHandlers.mouseleaveWindow&&t.removeEventListener("mouseleave",this.boundHandlers.mouseleaveWindow),this.boundHandlers.touchstart&&this.container.removeEventListener("touchstart",this.boundHandlers.touchstart),this.boundHandlers.touchmove&&document.removeEventListener("touchmove",this.boundHandlers.touchmove),this.boundHandlers.touchend&&document.removeEventListener("touchend",this.boundHandlers.touchend),this.boundHandlers.selectstart&&this.container.removeEventListener("selectstart",this.boundHandlers.selectstart),this.resizeHandler&&(t.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.resizeDelayTimeout&&(clearTimeout(this.resizeDelayTimeout),this.resizeDelayTimeout=null),this.container.style.transform="",this.container.style.cursor=""},"undefined"!=typeof module&&module.exports?module.exports=i:t.InfiniteScrollCarousel=i}("undefined"!=typeof window?window:this);
//# sourceMappingURL=grab-n-drag-infinite-carousel.min.js.map